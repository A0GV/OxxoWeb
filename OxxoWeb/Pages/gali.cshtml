@page
@using GerenteTareas.Pages
@model GaliModel
@{
    ViewData["Title"] = "galipantalla";
}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Panel del Gerente</title>
    <link rel="stylesheet" href="~/css/galistyle.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>

    <!-- ================================
         TÍTULO PRINCIPAL
    =================================== -->
    <div class="titulo-de-la-pag"> 
        <h1>Panel de Asignación del Gerente de Plaza</h1>
    </div>

   <!-- ================================
     RESUMEN KPIs (SOLO)
    =================================== -->
<div class="seccion resumen">
    <h2>Resumen General del Equipo</h2>
    <div class="kpis">

        <!-- Total asesores -->
        <div class="kpi">
            <div class="icono"><i class="bi bi-people-fill"></i></div>
            <strong>@Model.TotalAsesores</strong>
            <span>Asesores</span>
        </div>

        <!-- Metas activas -->
        <div class="kpi">
            <div class="icono"><i class="bi bi-bullseye"></i></div>
            <strong>@Model.MetasActivas</strong>
            <span>Metas activas</span>
        </div>

        <!-- Plazas registradas -->
        <div class="kpi">
            <div class="icono"><i class="bi bi-geo-alt-fill"></i></div>
            <strong>@Model.PlazasRegistradas</strong>
            <span>Plazas registradas</span>
        </div>

        <!-- Tiendas registradas -->
        <div class="kpi">
            <div class="icono"><i class="bi bi-shop"></i></div>
            <strong>@Model.TiendasRegistradas</strong>
            <span>Tiendas registradas</span>
        </div>

        <!-- Tareas totales -->
        <div class="kpi">
            <div class="icono"><i class="bi bi-clipboard-check"></i></div>
            <strong>@Model.TareasAsignadas</strong>
            <span>Tareas asignadas</span>
        </div>

        <!-- Tareas próximas a vencer -->
        <div class="kpi">
            <div class="icono"><i class="bi bi-alarm-fill"></i></div>
            <strong>@Model.TareasProximas</strong>
            <span>Próximas a vencer</span>
        </div>

    </div>
</div>

    <!-- ================================
     ROW 2: Progreso + Asignar
=================================== -->
<div class="row">
    <!-- Progreso de Asesores -->
    <div class="seccion progreso-asesores">
        <h2>Progreso de Asesores</h2>
        <div class="tabla-scrollable">
            <table>
                <thead>
                    <tr class="encabezado-tabla">
                        <th><i class="bi bi-person-fill"></i> Asesor</th>
                        <th><i class="bi bi-flag-fill"></i> Reto actual</th>
                        <th><i class="bi bi-calendar-event"></i> Fecha límite</th>
                        <th><i class="bi bi-bar-chart-fill"></i> Estado</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var asesor in Model.ProgresoAsesores)
                    {
                        <tr>
                            <td>@asesor.Nombre @asesor.ApellidoPat @asesor.ApellidoMat</td>
                            <td>@asesor.Reto</td>
                            <td>@asesor.FechaLimite.ToString("dd/MM/yyyy")</td>
                            <td class="@(asesor.Estado.ToLower() == "completado" ? "completado" : asesor.Estado.ToLower() == "en progreso" ? "progreso" : "no-iniciado")">
                                @if (asesor.Estado.ToLower() == "completado")
                                {
                                    <text><i class="bi bi-check2-circle"></i> Completado</text>
                                }
                                else if (asesor.Estado.ToLower() == "en progreso")
                                {
                                    <text><i class="bi bi-hourglass-split"></i> En progreso</text>
                                }
                                else
                                {
                                    <text><i class="bi bi-x-circle"></i> Sin empezar</text>
                                }
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

    <!-- Asignar Tarea -->
    <div class="seccion asignar-tarea">
        <h2>Asignar Tarea</h2>
        <form method="post">
            <div class="campo-formulario">
                <label for="titulo"><i class="bi bi-pencil-fill"></i> Título de tarea:</label>
                <input type="text" id="titulo" asp-for="NuevaTarea.Titulo" />
            </div>

            <div class="campo-formulario">
                <label for="tipo"><i class="bi bi-ui-checks-grid"></i> Tipo de tarea:</label>
                <!--<select id="tipo" name="tipo"> -->
                <select asp-for="NuevaTarea.Tipo">
                    <option disabled selected>Selecciona un tipo</option>
                    <option>Capacitación</option>
                    <option>Reto EXP</option>
                    <option>Registro diario</option>
                    <option>Otro</option>
                </select>
            </div>

        <div class="campo-formulario">
            <label for="FechaLimite"><i class="bi bi-calendar-event"></i> Fecha límite:</label>
            <input asp-for="NuevaTarea.FechaLimite" type="date" class="form-control" />
        </div>


            <div class="campo-formulario">
                <label for="asesor"><i class="bi bi-people-fill"></i> Seleccionar asesor:</label>
                <!-- <select id="asesor" name="asesor"> -->
                <select asp-for="NuevaTarea.IdUsuario">
                    <option disabled selected>Selecciona un asesor</option>
                    @foreach (var asesor in Model.Asesores)
                    {
                        <option value="@asesor.IdUsuario">@asesor.nombre @asesor.apellido_pat</option>
                    }
                </select>
            </div>

            <div class="form-buttons">
                <button type="submit">✔ Guardar</button>
                <button type="button" style="background-color: #a71d1d;">✖ Borrar</button>
            </div>
        </form>

        @if (TempData["Mensaje"] != null)
{
    <div id="popup-exito" class="popup-mensaje">
        <i class="bi bi-check-circle-fill"></i> @TempData["Mensaje"]
    </div>
}


    </div>
</div>



    <!-- ================================
         ROW 3: Metas Activas + Completadas
    =================================== -->
    <div class="row">
        <div class="seccion metas-activas">
            <h2>Metas Activas del Equipo</h2>
            <div class="progress-bar">
                <label>Capacitación finalizada</label>
                <progress value="3" max="4"></progress>
                <span>3/4 asesores</span>
            </div>
            <div class="progress-bar">
                <label>EXP acumulado en el juego</label>
                <progress value="300" max="500"></progress>
                <span>300/500 EXP</span>
            </div>
            <div class="progress-bar">
                <label>Inicio de sesión consecutiva</label>
                <progress value="3" max="5"></progress>
                <span>3/5 días</span>
            </div>
        </div>

    <div class="seccion metas-completadas">
    <h2>Metas Completadas</h2>

    <div class="filtro-logros-wrapper">
        <!-- INPUTS -->
        <input type="radio" name="filtro" id="filtro-equipo" checked>
        <input type="radio" name="filtro" id="filtro-individual">

        <!-- BOTONES -->
        <div class="filtro-logros">
            <label for="filtro-equipo" class="boton-filtro">Equipo</label>
            <label for="filtro-individual" class="boton-filtro">Individual</label>
        </div>

        <!-- CONTENIDO LOGROS -->
        <div class="contenedor-logros">
    <ul class="ranking contenido contenido-equipo">
        <li><i class="bi bi-trophy"></i> Capacitación completada por todos</li>
        <li><i class="bi bi-bar-chart-line"></i> 5000 EXP acumulados</li>
        <li><i class="bi bi-lightning-fill"></i> 5 días consecutivos activos</li>
        <li><i class="bi bi-award"></i> Meta especial desbloqueada</li>
    </ul>

    <ul class="ranking contenido contenido-individual">
        <li><i class="bi bi-1-circle"></i> Ana Martínez - 12 metas</li>
        <li><i class="bi bi-2-circle"></i> Carlos López - 9 metas</li>
        <li><i class="bi bi-3-circle"></i> Sofía Vázquez - 7 metas</li>
    </ul>
    </div>
    </div>
</div>



</body>
</html>
