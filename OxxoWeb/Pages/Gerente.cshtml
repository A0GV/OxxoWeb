@page 
@model OxxoWeb.Pages.GerenteModel

@{
    ViewData["Title"] = "Asesores de tienda";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

<div class="container mt-4 Titillium">

    <!-- Caja de búsqueda -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1 class="mb-0">Asesores de tienda</h1>

        <div class="input-group" style="max-width: 300px;">
            <span class="input-group-text" style="background-color: #F4BB4C;">
                <i class="bi bi-search"></i>
            </span>
            <input type="text" id="searchInput" class="form-control" placeholder="Buscar asesor..." />
        </div>
    </div>

    
    <!-- Header -->
    <div class="header-fixed-custom text-dark" style="margin-top: 30px;">

        <div class="row text-center fw-bold">
            <div class="col">Nombre</div>
            <div class="col">Correo</div>
            <div class="col" style="text-align: right; padding-right: 110px;">Tiendas</div>
            <div class="col text-start ">Acciones</div>

        </div>
    </div>

    <!-- Tabla de asesores -->
    <div class="table-responsive background-beige-cell rounded shadow-sm" style="max-height: 600px; overflow-y: auto;">
        <table id="asesoresTable" class="table table-hover table-borderless align-middle mb-0">
            <tbody>
                @foreach (OxxoWeb.Models.AsesorInfo asesor in Model.ListaAsesores)
                {
                    <tr class="align-middle">
                        <td>
                            <div class="d-flex align-items-center gap-3">
                                <img src="~/Img/asesores/@(asesor.IdUsuario).png"
                                     alt="Foto asesor"
                                     class="rounded-circle"
                                     style="width: 50px; height: 50px; object-fit: cover;" />
                                <span>@asesor.Nombre @asesor.ApellidoPat</span>
                            </div>
                        </td>
                        <td>
                            <a href="mailto:@asesor.Correo" class="text-dark d-flex align-items-center gap-2">
                                <i class="bi bi-envelope-fill"></i> @asesor.Correo
                            </a>
                        </td>
                        <td><span class="badge bg-secondary">@asesor.TiendasCount</span> tiendas</td>
                        <td>
                            <a href="/Perfil?idUsuario=@asesor.IdUsuario" class="btn btn-sm btn-outline-secondary me-2" title="Ver perfil">
                                <i class="bi bi-eye"></i>
                            </a>
                            <a class="btn btn-sm btn-outline-secondary me-2" title="Desempeño">
                                <i class="bi bi-bar-chart-line"></i>
                            </a>
                            <a class="btn btn-sm btn-outline-secondary" title="Asignar tarea">
                                <i class="bi bi-clipboard-plus"></i>
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>



<!-- Script para búsqueda -->
<script>
    document.getElementById("searchInput").addEventListener("keyup", function () {
        const search = this.value.toLowerCase();
        const rows = document.querySelectorAll("#asesoresTable tbody tr");

        rows.forEach(row => {
            const rowText = row.innerText.toLowerCase();
            row.style.display = rowText.includes(search) ? "" : "none";
        });
    });
</script>

