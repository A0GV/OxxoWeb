@page
@model DashboardModel

@{
    ViewData["Title"] = "Dashboard";
}

<div class="container align-items-center Titillium">
    <h1>Estadísticas</h1>
    <div class="mt-4">
        <div class="col-12 background-beige-cell rounded align-items-end shadow-sm">
            @if (Model.UsuarioPerfil.TipoUsuario == "a")
                {
                    // Calc valores para ese usuario
                    int idSession = Model.UsuarioPerfil.IdUsuario; 

                    // Parámetros para query
                    int idUsuario = idSession; 
                    int idUsuarioElote = idSession; 
                    int idUsuarioExpCount = idSession; 
                    int idUsuarioDias = idSession;
                    int idUsuarioBars = idSession; 

                    // Usar valores para el JSON
                    string jsonParameters = System.Text.Json.JsonSerializer.Serialize(new { idUsuario, idUsuarioElote, idUsuarioExpCount, idUsuarioDias, idUsuarioBars });
                    string fullParameters = Uri.EscapeDataString(jsonParameters);

                    // Interpolated string usando {} con los parametros completos
                    string reportUrl = $"https://lookerstudio.google.com/embed/reporting/453fab71-0840-4f3f-988b-7c872a2a0441/page/FupHF?params={fullParameters}"; 
                    
                <iframe width="1200" height="1800" src="@reportUrl" frameborder="0" style="border:0" allowfullscreen sandbox="allow-storage-access-by-user-activation allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox"></iframe>
                }
                else // Dashboard para Gerente
                { 
                    // Calc valores para ese usuario
                    int idGerente = Model.UsuarioPerfil.IdUsuario; 

                    // Parámetros para query
                    int ParamGauges = idGerente; 
                    int ParamRadarChartYBarras = idGerente; 
                    int ParamDona = idGerente;
                    
                    // Usar valores para el JSON
                    string jsonParameters = System.Text.Json.JsonSerializer.Serialize(new { ParamGauges, ParamRadarChartYBarras, ParamDona });
                    string fullParameters = Uri.EscapeDataString(jsonParameters);

                    // Interpolated string usando {} con los parametros completos
                    string reportUrl = $"https://lookerstudio.google.com/embed/reporting/394db214-3d78-41f7-8a14-b65478b44a09/page/LsOIF?params={fullParameters}"; 
                    
                <iframe width="1200" height="1800" src="@reportUrl" frameborder="0" style="border:0" allowfullscreen sandbox="allow-storage-access-by-user-activation allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox"></iframe>

            
                }
        </div>
    </div>
</div>